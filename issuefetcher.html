<html><head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">

  
  

  
  
  

  

  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.js"></script>

  

  

  

  
    <link rel="stylesheet" type="text/css" href="/css/result-light.css">
  

  

  <style type="text/css">
    .nothing{
  background-color:light-grey;
}
.working{
  background-color:yellow;
}
.finished{
  background-color:rgb(100,255,100);
}
  </style>

  <title></title>

  
    




<script type="text/javascript">//<![CDATA[
window.onload=function(){

function populate(page, token){
$("#status").html("Fetching page " + page);
$.ajax({
    url: "https://spotlite.nih.gov/api/v3/projects/27/issues?per_page=100&page=" + page,
    headers: {
        "PRIVATE-TOKEN":token
    }
}).done(function(data) { 
		
		var gotsome=false;
	  for(var i=0;i<data.length;i++){
    	gotsome=true;
    	if(i==0){
    		for(var k in data[i]){
        	console.log(k);
        }
    	}
      var milestone="";
      var assigned="nobody";
      if(data[i].milestone){
      	milestone=data[i].milestone.title;
      }
      if(data[i].assignee){
	      assigned=data[i].assignee.name;
      }
    	//alert(i);
    	$("#results").append(
      data[i].iid + "\t" +
			data[i].title + "\t" +
			data[i].state + "\t" +
      milestone + "\t" +
      data[i].created_at + "\t" +
      data[i].updated_at + "\t" +
      data[i].labels + "\t" +
      assigned + "\t" 
      
      + "\n");
    }
    if(gotsome){
    	
    	populate(page+1, token);
    }else{
      $("#status").html("Finished");
      $("#status").addClass("finished");
      $("#status").removeClass("working");
      $("#status").removeClass("nothing");
      
    }
});
}
$("button").click(function(){
	$("#results").html("");
  $("#results").append(
      "Issue ID" + "\t" +
			"Issue Title" + "\t" +
			"Issue State" + "\t" +
			"Milestone" + "\t" +
			"Created At" + "\t" +
			"Updated At" + "\t" +
			"Labels" + "\t" +
      "Assigned to" + "\n");
      
      $("#status").addClass("working");
      $("#status").removeClass("finished");
      $("#status").removeClass("nothing");
	populate(1, "Ec7V3PQy2AipKpyeoCso");	
});

}//]]> 

</script>

  
</head>

<body class=" hasGoogleVoiceExt">
  <div class="nothing">
Click "Fetch Issues" to get out a tab-separated list of the current issues. You can copy and paste the results into excel or some other editting tool.
<br>
<br>
Wait for the status below to say <span class="finished">"finished"</span> (in green).
<br>
</div>
<br><br>

<button>
Fetch Issues
</button>
<br>
<span>Status:<span class="nothing" id="status">No data fetched yet</span></span><br>
<textarea style="width:500px;height:500px" id="results">

</textarea>
  




</body></html>