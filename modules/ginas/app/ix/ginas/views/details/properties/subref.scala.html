@import ix.ginas.controllers.v1.SubstanceFactory
@import ix.ginas.models.v1.{ChemicalSubstance, SubstanceReference}
@(sub: SubstanceReference)
    @defining(SubstanceFactory.getFullSubstance(sub)) { ref =>
        <div class="col-md-3 text-center thumb-col">
            <div class="panel panel-default">
            	<div class ="panel-header">
            		  @if(ref != null) {
            		  	@ref.approvalID
            		  }else{
            		    <i>Substance not yet imported</i> <br />
            		  }
            	</div>
                <div class = "panel-body">
                    @if(ref != null) {
                            @if(ref.getClass.toString.equals("class ix.ginas.models.v1.ChemicalSubstance")){
	                            	<img class="struc-thumb img-responsive" alt="Structure of @ref.getName()" title="Structure of @ref.getName()"
	                                src='@ix.ginas.controllers.routes.GinasApp.structure(ref.asInstanceOf[ChemicalSubstance].structure.getId, "svg", 150)'>
	                            		
	                            }else{
	                             	@if(ref.getClass.toString.equals("class ix.ginas.models.v1.StructurallyDiverseSubstance")){
	                                   <i class="fa fa-puzzle-piece fa-4x "></i>
	                                }else{
	                                	@if(ref.getClass.toString.equals("class ix.ginas.models.v1.ProteinSubstance")){
	                                		<img src="@routes.Assets.at("ginas/images/proteinHolder.png")" class="img-responsive" id="" />
	                                	}else{
		                                	@if(ref.getClass.toString.equals("class ix.ginas.models.v1.MixtureSubstance")){
		                                		<div class = "col-md-3">
									                <div class = "row">
									                    <div class = "col-md-1 pour">
									                        <i class="fa fa-flask fa-4x fa-rotate-90"></i>
									                    </div>
									                </div>
									                <div class ="row">
									                    <div class = "col-md-1 col-md-offset-1">
									                        <i class="fa fa-flask fa-4x"></i>
									                    </div>
									                </div>
									            </div>
		                                	}else{
		                                		@if(ref.getClass.toString.equals("class ix.ginas.models.v1.PolymerSubstance")){
			                                		
			                                	}else{
			                                		@if(ref.substanceClass.toString().equals("concept")){
			                                			<i class="fa fa-cloud fa-4x "></i>
			                                		}else{
			                                			
			                                		}
			                                	}	
		                                	}	
	                                	}
	                                } 
	                            }
	                           }else{
	                            	<i class="fa fa-question-circle fa-4x "></i>
	                            }
                        </div>
                <div class ="panel-footer">
                	 @if(ref != null) {
	                	@*
	                	This is making the route via the substance reference, rather than the expanded substance.
	                	This has not been very well standardized so far. 
	                	
	                	*@
	                    <a href="@ix.ginas.controllers.routes.GinasApp.substance(sub.getLinkingID())" target="_self">@sub.refPname</a>
	                    
                    } else {
	                  
	                	@sub.refPname
	                }
                </div>
            </div>
        </div>
    }
