@import play.api.Play.current

@(kind: String, json: String)


@wizardfields(kind: String) = {

    @kind match {
        case "chemical" => {
            <div>@forms.structureform()</div>
            <div>@forms.moietyform()</div>
        }
        case "mixture" => {
           <div>@forms.mixturecomponentselectform()</div>
        }
        case "protein" => {
             <div>@forms.proteindetailsform()</div>
             <div>@forms.subunitform("protein")</div>
             <div>@forms.disulfideform()</div>
             <div>@forms.otherlinksform()</div>
             <div>@forms.glycosylationform()</div>
             <div>@forms.agentmodificationform()</div>
             <div>@forms.structuralmodificationform()</div>
             <div>@forms.physicalmodificationform()</div>
        }
        case "structurallyDiverse" => {
           <div>@forms.diversesourceform()</div>
           <div ng-if="substance.structurallyDiverse.sourceMaterialClass.value =='ORGANISM'">@forms.diverseorganismform()</div>
            <div>@forms.diversedetailsform()</div>
            <div>@forms.parentform()</div>
            <div>@forms.partform()</div>


        }
        case "concept" => {
            <div>Concepts have no defining information, but are collections of terms, codes and related information. They can be promoted to a defined substance at a later time, when appropriate.</div>
        }
        case "polymer" => {
           <div>Polymer not implemented yet, still in development</div>
           <div>@forms.polymerclassificationform()</div>
           <div>@forms.polymermonomerselectform()</div>
           <div>@forms.polymerstructureform()</div>
           <div>@forms.polymersruform()</div>           
        }
        case "nucleicAcid" => {
           <div>Nucleic Acid not implemented yet, still in development</div>
           <div>@forms.nucleicaciddetailsform()</div>
           <div>@forms.subunitform("nucleicAcid")</div>           
           <div>@forms.nucleicacidsugarform()</div>
           <div>@forms.nucleicacidlinkageform()</div>
        }        
        case x =>{
            <h2>Unknown substance class: @kind</h2>    
        }
    }

    <div>@forms.officialnameform()</div>
    <div>@forms.nameform()</div>
    <div>@forms.codeform()</div>
    <div>@forms.relationshipform()</div>
    <div>@forms.noteform()</div>
    <div>@forms.propertyform()</div>
    <div ng-show="substance.references">@forms.referenceform()</div>
    @forms.referencemodalform()
    @forms.amountmodalform()
    @forms.parametermodalform()

}

@ginas("Register", kind) {
    @menu()
} {
    <h3></h3>
} {
    <h3></h3>
    @*
        Loading all CV
    *@
    <script src="@play.api.Play.configuration.getString("application.context").getOrElse("/ginas/app")/api/v1/vocabularies/?top=100&callback=window.CV_REQUEST="></script>
    <div ng-cloak>
        @wizardfields(kind)
        <div class = "row info">
            <div class="col-md-4">
                <button class="btn btn-primary" ng-hide="showJSON" ng-click="showJSON=true" >Show JSON</button>
                <button class="btn btn-primary" ng-show="showJSON" ng-click="showJSON=false" >Hide JSON</button>
                <button class="btn btn-primary" ng-click="validateSubstance(substance)">Validate</button></div>
            <div class="col-md-1 pull-right">
                <button class="btn btn-primary" ng-click="submitSubstance(substance)">Submit</button>
            </div>
        </div>
        <div class = "row" ng-repeat="err in errorsArray">
            @*
            // <error-window error = error></error-window>
            *@
            <div class="col-md-12">
                <div class="alert {{err.class}} alert-dismissible" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span>
                    </button>
                    <span><h4>{{err.messageType}}</h4>&nbsp;{{err.message}} </span>
                </div>
            </div>

        </div>
    </div>
    <div class ="row info" ng-show="showJSON">
        <pre>{{substance | json}}</pre>
    </div>
    <div class="row info"><div class = "col-md-12">
        <textarea class="form-control" rows="10" ng-model="paste"></textarea>
    </div>
    </div>
    <div class ="row info">
        <button ng-click="submitpaster(paste); validate(substance)">paste</button>
</div>
        <script>
        var loadjson = @Html(json);
    </script>

        <script type="text/ng-template" id="tag-template-script">
        <div class="tag-template" >
        <div tooltip="{{data.citation}}">
        <span>{{$getDisplayText()}}</span>
        <a class="remove-button" ng-click="$removeTag()">&#10006;</a>
        </div>
        </div>
        </script>

    @fileimport() @addnamelist()
}

