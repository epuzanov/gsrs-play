<div class = "row info" >
    <button class="btn btn-primary label-offset det">
                        Codes&nbsp;<span class="badge" ng-show="substance.codes.length>0">
                        {{substance.codes.length}}</span> </button>
    <div class="col-md-12">
        <form class="form-horizontal" name="codeForm" role="form" novalidate>
            <div class="row form-row">
                <div class="col-md-3 err-check">
                    <text-input ng-model="code.code" field="code" arr="substance.codes" required></text-input>
                </div>
                <div class="col-md-2 err-check">
                    <dropdown-select ng-model="code.system" field="system" cv = "CODE_SYSTEM" arr="substance.codes"></dropdown-select>
                </div>
                <div class="col-md-2 err-check">
                    <dropdown-select ng-model="code.type" field="type" cv = "CODE_TYPE" arr="substance.codes"></dropdown-select>
                </div>
                <div class="col-md-3 err-check">
                    <text-input ng-model="code.description" field="description" arr="substance.codes" required></text-input>
                </div>
                <div class="col-md-1 pull-right">
                    <reference-selector ng-model = "code.references" referenceobj= "code" arr="substance.codes" parent = "substance" formname="codeForm"></reference-selector>
                </div>
            </div>
            <div class="codeForm"></div>
            <submit-buttons submit="code" form="codeForm" path="codes"></submit-buttons>
        </form>

        <div class = "row" ng-repeat="obj in substance.codes">
            <hr>
            <div class="col-md-1">
                <delete-button delete="obj"></delete-button>
            </div>
            <div class="col-md-3 err-check" >
                <text-view-edit obj = "obj" field="code" arr="substance.codes" required></text-view-edit>
            </div>
            <div class="col-md-2 err-check" >
                <dropdown-view-edit obj = "obj" field="system" cv = "CODE_SYSTEM" arr="substance.codes"></dropdown-view-edit>
            </div>
            <div class="col-md-2 err-check">
                <dropdown-view-edit obj = "obj" field="type" cv = "CODE_TYPE" arr="substance.codes"></dropdown-view-edit>
            </div>
            <div class="col-md-3 err-check">
                <text-view-edit obj = "obj" field="description" arr="substance.codes" required></text-view-edit>
            </div>
            <div class="col-md-1 pull-right">
                <reference-selector-view obj = "obj" referenceobj= "code" arr="substance.codes" parent = "substance" formname="codeForm"></reference-selector-view>
            </div>
        </div>
    </div>
</div>
