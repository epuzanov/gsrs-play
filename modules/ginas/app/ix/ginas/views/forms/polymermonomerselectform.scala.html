@import ix.ginas.controllers.GinasApp;

<div class = "row info" >
    <button class="btn btn-primary label-offset det">
                      Monomers and Starting Materials&nbsp;<span class="badge" ng-show="substance.polymer.monomers.length>0">
                        {{substance.polymer.monomers.length}}</span> </button>
    <div class="col-md-12">
        <div class ="row header-row">
            <div class="col-md-2"><strong>Monomer Substance</strong></div>
            <div class="col-md-5"><strong>Type</strong></div>
            <div class="col-md-4"><strong>Amount</strong></div>            
        </div>
        <div ng-repeat="component in substance.polymer.monomers">
            <div ng-show="component._editType=='edit'" class="text-center editreminder">
                  Editing monomer below.
            </div>
            
            <div class="row">
                <div ng-hide="component._editType=='edit'" class="text-center">
                        <div class ="col-md-2">
                            <substance-chooser ng-model = "component.monomerSubstance"></substance-chooser>
                        </div>
                       <div class = "col-md-5">
                           <span href="#" editable-select="component.type"  e-style="width: 100%" e-ng-options="r.display for r in lookup.getList('MONOMER_TYPE') track by r.display" blur="submit">{{component.type.display}}</span>
                       </div>
                       <div class="col-md-4">
                            <amount-edit-display ng-model="component.amount"></amount-edit-display> 
                        </div>
            
                       
                </div>
                       <div class="pull-right">
                            <button  ng-hide="component._editType=='edit'" ng-click="setEditMonomer(component)">Edit</button>
                            <button  ng-show="component._editType=='edit'" ng-click="validate('component', 'monomerForm', 'polymer.monomers', true);">Update</button>
                            <button  ng-hide="component._editType=='edit'" ng-click="removeItem(substance.polymer.monomers, component)">Remove</button>
                       </div>                       
            </div>
           
        </div>
        <hr>
        <form class="form-horizontal" name="monomerForm" id = "add-component" role="form" novalidate>
                <div ng-show="component._editType=='edit'">
                    Editing Monomer / Starting Material
                </div>
                <div ng-hide="component._editType=='edit'">
                    Add new Monomer / Starting Material
                </div>
            <div class="row form-row">
                <div class="col-md-2">
                    <substance-chooser ng-model="component.monomerSubstance"></substance-chooser>
                </div>
                <div class="col-md-5 err-check" show-errors>
                    <select class="form-control" title="Monomer Type" id="type" name = "type" ng-model = "component.type" ng-options="r.display for r in lookup.getList('MONOMER_TYPE') track by r.display" required>
                        </select>
                    <ng-messages for="monomerForm.type.$error" ng-if="monomerForm.type.$touched">
                        <ng-message when="required" class="help-block">*required</ng-message>
                    </ng-messages>
                </div>
                <div class="col-md-4">
                    <amount-edit-display ng-model="component.amount"></amount-edit-display> 
                </div>
            </div>
            <amount-form ng-model="component.amount"></amount-form>
            <submit-buttons submit="component" form="monomerForm" path="polymer.monomers"></submit-buttons>
        </form>

    </div>
</div>