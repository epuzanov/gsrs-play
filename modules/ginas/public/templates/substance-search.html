<div ng-cloak="">
    <label id="{{field}}-label" class="text-capitalize">{{label || field}}</label>
    <a ng-click="referenceobj[field]=null">
        <div ng-if=referenceobj[field]>
            <substance-view subref=referenceobj[field]></substance-view>
        </div>
    </a>
    <spinner name="subrefSpinner">
        <loading></loading>
        <br/>
    </spinner>
    <div ng-controller="TypeAheadController" ng-init="init('query')" ng-show="!referenceobj[field]" id="{{field}}">
        <div class="input-group">
            <input type="text" class="form-control" ng-model="query" id="struc-search" placeholder="Search ..." name="search" aria-labelledby="{{field}}-label"
                   typeahead-popup-template-url="app/assets/templates/elements/suggest-popup.html" uib-typeahead="r.d as r.d for r in getSuggestions($viewValue)"
                   typeahead-loading="loadingSuggest" typeahead-focus-first="false"
                   typeahead-on-select="selectTypeahead($item, $event);" autocomplete="off">
            <span class="input-group-btn">
                <button class="btn btn-default" ng-click="$parent.q=query;fetch()" uib-tooltip="search for substance" aria-label="Search">
                    <span class="sr-only">Search gsrs</span>
                    <i class="fa fa-search"></i>
                </button>
            </span>
        </div>
    </div>
</div>