<div class="row info">
    <div class="row">
        <form-header type="structuralModifications" path="modifications.structuralModifications" parent="parent" iscollapsed = "iscollapsed"></form-header>
    </div>
    <div class="col-md-12" uib-collapse="iscollapsed">
        <form class="form-horizontal" name="strucModForm" role="form" novalidate>
            <div class="row form-row">
                <div class="col-md-2">
                    <dropdown-select ng-model="mod.structuralModificationType" field="structuralModificationType"
                                     cv="STRUCTURAL_MODIFICATION_TYPE" label="Modification Type"></dropdown-select>
                </div>
                <div class="col-md-2">
                    <substance-chooser-selector ng-model="mod.molecularFragment" field="molecularFragment"
                                                name="molecularFragment" formname="strucModForm"
                                                label="Molecular Fragment" type="lite"></substance-chooser-selector>
                </div>
                <div class="col-md-2">
                    <dropdown-select ng-model="mod.locationType" field="locationType" cv="LOCATION_TYPE"
                                     label="Location Type"></dropdown-select>
                </div>
                <div class="col-md-2">
                    <form-selector referenceobj="mod" parent="parent" field = "sites" divid="strucModForm"
                                   type="site"></form-selector>
                    <!--<input type="text" class="form-control" ng-model="structuralModification._displaySites"
                           title="Modification Sites" id="modsites" name="modsites"
                           na-sites={{structuralModification}}/>-->
                    <small class="error" ng-show="strucModForm.modsites.$error.siteInvalid">
                        {{strucModForm.modsites.$errorMsg.naSites}}
                    </small>
                </div>
                <div class="col-md-1">
                    <dropdown-select ng-model="mod.extent" field="extent" cv="EXTENT_TYPE"
                                     label="Extent"></dropdown-select>
                </div>
                <div class="col-md-1">
                    <form-selector referenceobj="mod" parent="parent" divid="strucModForm"
                                   type="amount"></form-selector>
                </div>
                <div class="col-md-1 pull-right">
                    <form-selector referenceobj="mod" parent="parent" divid="strucModForm"
                                   type="access"></form-selector>
                </div>
                <div class="col-md-1 pull-right">
                    <form-selector referenceobj="mod" parent="parent" divid="strucModForm"
                                   type="reference"></form-selector>
                </div>
            </div>
            <div class="strucModForm"></div>
            <submit-buttons submit="mod" form="strucModForm" path="structuralModifications"></submit-buttons>
        </form>


        <div ng-repeat="obj in parent.protein.modifications.structuralModifications">
            <div class="row">
                <hr>
                <div class="col-md-1">
                    <delete-button delete="obj" path="protein.modifications.structuralModifications"></delete-button>
                </div>
                <div class="col-md-2">
                    <dropdown-view-edit obj="obj" field="structuralModificationType"
                                        cv="STRUCTURAL_MODIFICATION_TYPE"
                                        label="Modification Type"></dropdown-view-edit>
                </div>
                <div class="col-md-2">
                    <substance-chooser-view-edit obj="obj" field="molecularFragment"
                                                 label="Molecular Fragment"></substance-chooser-view-edit>
                </div>
                <div class="col-md-2">
                    <dropdown-view-edit obj="obj" field="locationType" cv="LOCATION_TYPE"
                                        label="Location Type"></dropdown-view-edit>
                </div>
                    <div class="col-md-1">
                        <form-selector referenceobj="obj" parent="parent" type="site" divid={{obj.$$hashKey}}
                                       mode="edit"></form-selector>
                    </div>
                <div class="col-md-1">
                    <dropdown-view-edit obj="obj" field="extent" cv="EXTENT_TYPE"
                                        label="Extent"></dropdown-view-edit>
                </div>
                <div class="col-md-1">
                    <form-selector referenceobj="obj.extentAmount" parent="parent" type="amount" divid={{obj.$$hashKey}}
                                   mode="edit"></form-selector>
                </div>
                <div class="col-md-1 pull-right">
                    <form-selector referenceobj="obj" parent="parent" type="access" divid={{obj.$$hashKey}}
                                   mode="edit"></form-selector>
                </div>
                <div class="col-md-1 pull-right">
                    <form-selector referenceobj="obj" parent="parent" type="reference" divid={{obj.$$hashKey}}
                                   mode="edit"></form-selector>
                </div>
            </div>
            <div class={{obj.$$hashKey}}></div>
        </div>
    </div>
</div>